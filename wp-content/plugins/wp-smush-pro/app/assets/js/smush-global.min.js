!function(){var t={1873:function(t,e,n){var o=n(9325).Symbol;t.exports=o},1033:function(t){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},695:function(t,e,n){var o=n(8096),r=n(2428),i=n(6449),a=n(3656),c=n(361),u=n(7167),s=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),l=!n&&r(t),f=!n&&!l&&a(t),d=!n&&!l&&!f&&u(t),v=n||l||f||d,p=v?o(t.length,String):[],h=p.length;for(var y in t)!e&&!s.call(t,y)||v&&("length"==y||f&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||c(y,h))||p.push(y);return p}},6547:function(t,e,n){var o=n(3360),r=n(5288),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&r(a,n)&&(void 0!==n||e in t)||o(t,e,n)}},3360:function(t,e,n){var o=n(3243);t.exports=function(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},2552:function(t,e,n){var o=n(1873),r=n(659),i=n(9350),a=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):i(t)}},7534:function(t,e,n){var o=n(2552),r=n(346);t.exports=function(t){return r(t)&&"[object Arguments]"==o(t)}},5083:function(t,e,n){var o=n(1882),r=n(7296),i=n(3805),a=n(7473),c=/^\[object .+?Constructor\]$/,u=Function.prototype,s=Object.prototype,l=u.toString,f=s.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||r(t))&&(o(t)?d:c).test(a(t))}},4901:function(t,e,n){var o=n(2552),r=n(294),i=n(346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&r(t.length)&&!!a[o(t)]}},8984:function(t,e,n){var o=n(5527),r=n(3650),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!o(t))return r(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9302:function(t,e,n){var o=n(3488),r=n(6757),i=n(2865);t.exports=function(t,e){return i(r(t,e,o),t+"")}},9570:function(t,e,n){var o=n(7334),r=n(3243),i=n(3488),a=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:i;t.exports=a},8096:function(t){t.exports=function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}},7301:function(t){t.exports=function(t){return function(e){return t(e)}}},1791:function(t,e,n){var o=n(6547),r=n(3360);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var c=-1,u=e.length;++c<u;){var s=e[c],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),a?r(n,s,l):o(n,s,l)}return n}},5481:function(t,e,n){var o=n(9325)["__core-js_shared__"];t.exports=o},999:function(t,e,n){var o=n(9302),r=n(6800);t.exports=function(t){return o((function(e,n){var o=-1,i=n.length,a=i>1?n[i-1]:void 0,c=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,c&&r(n[0],n[1],c)&&(a=i<3?void 0:a,i=1),e=Object(e);++o<i;){var u=n[o];u&&t(e,u,o,a)}return e}))}},3243:function(t,e,n){var o=n(6110),r=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},4840:function(t,e,n){var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=o},6110:function(t,e,n){var o=n(5083),r=n(392);t.exports=function(t,e){var n=r(t,e);return o(n)?n:void 0}},659:function(t,e,n){var o=n(1873),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,c=o?o.toStringTag:void 0;t.exports=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var o=!0}catch(t){}var r=a.call(t);return o&&(e?t[c]=n:delete t[c]),r}},392:function(t){t.exports=function(t,e){return null==t?void 0:t[e]}},361:function(t){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var o=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==o||"symbol"!=o&&e.test(t))&&t>-1&&t%1==0&&t<n}},6800:function(t,e,n){var o=n(5288),r=n(4894),i=n(361),a=n(3805);t.exports=function(t,e,n){if(!a(n))return!1;var c=typeof e;return!!("number"==c?r(n)&&i(e,n.length):"string"==c&&e in n)&&o(n[e],t)}},7296:function(t,e,n){var o,r=n(5481),i=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";t.exports=function(t){return!!i&&i in t}},5527:function(t){var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},3650:function(t,e,n){var o=n(4335)(Object.keys,Object);t.exports=o},6009:function(t,e,n){t=n.nmd(t);var o=n(4840),r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,a=i&&i.exports===r&&o.process,c=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=c},9350:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},4335:function(t){t.exports=function(t,e){return function(n){return t(e(n))}}},6757:function(t,e,n){var o=n(1033),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,c=r(i.length-e,0),u=Array(c);++a<c;)u[a]=i[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=i[a];return s[e]=n(u),o(t,this,s)}}},9325:function(t,e,n){var o=n(4840),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();t.exports=i},2865:function(t,e,n){var o=n(9570),r=n(1811)(o);t.exports=r},1811:function(t){var e=Date.now;t.exports=function(t){var n=0,o=0;return function(){var r=e(),i=16-(r-o);if(o=r,i>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},7473:function(t){var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},6139:function(t,e,n){var o=n(6547),r=n(1791),i=n(999),a=n(4894),c=n(5527),u=n(5950),s=Object.prototype.hasOwnProperty,l=i((function(t,e){if(c(e)||a(e))r(e,u(e),t);else for(var n in e)s.call(e,n)&&o(t,n,e[n])}));t.exports=l},7334:function(t){t.exports=function(t){return function(){return t}}},5288:function(t){t.exports=function(t,e){return t===e||t!=t&&e!=e}},3488:function(t){t.exports=function(t){return t}},2428:function(t,e,n){var o=n(7534),r=n(346),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(t){return r(t)&&a.call(t,"callee")&&!c.call(t,"callee")};t.exports=u},6449:function(t){var e=Array.isArray;t.exports=e},4894:function(t,e,n){var o=n(1882),r=n(294);t.exports=function(t){return null!=t&&r(t.length)&&!o(t)}},3656:function(t,e,n){t=n.nmd(t);var o=n(9325),r=n(9935),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,c=a&&a.exports===i?o.Buffer:void 0,u=(c?c.isBuffer:void 0)||r;t.exports=u},1882:function(t,e,n){var o=n(2552),r=n(3805);t.exports=function(t){if(!r(t))return!1;var e=o(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},294:function(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3805:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},346:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},7167:function(t,e,n){var o=n(4901),r=n(7301),i=n(6009),a=i&&i.isTypedArray,c=a?r(a):o;t.exports=c},5950:function(t,e,n){var o=n(695),r=n(8984),i=n(4894);t.exports=function(t){return i(t)?o(t):r(t)}},9935:function(t){t.exports=function(){return!1}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,loaded:!1,exports:{}};return t[o](i,i.exports,n),i.loaded=!0,i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){"use strict";var t=n(6139),e=n.n(t);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=new function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:ajaxurl,method:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",cache:!1};return e instanceof FormData?(e.append("action",t),e.append("_ajax_nonce",window.wp_smush_msgs.nonce),n.contentType=!1,n.processData=!1):(e._ajax_nonce=e._ajax_nonce||window.smush_global.nonce||window.wp_smush_msgs.nonce,e.action=t),n.data=e,new Promise((function(t,e){jQuery.ajax(n).done(t).fail(e)})).then((function(t){return"object"!==o(t)&&(t=JSON.parse(t)),t})).catch((function(t){return console.error("Error:",t),t}))}var n={background:{start:function(){return t("bulk_smush_start")},cancel:function(){return t("bulk_smush_cancel")},initState:function(){return t("bulk_smush_get_status")},getStatus:function(){return t("bulk_smush_get_status")},getStats:function(){return t("bulk_smush_get_global_stats")},backgroundHealthyCheck:function(){return t("smush_start_background_pre_flight_check")},backgroundHealthyStatus:function(){return t("smush_get_background_pre_flight_status")}},smush:{syncStats:function(e){return t("get_stats",e=e||{})},ignoreAll:function(e){return t("wp_smush_ignore_all_failed_items",{type:e})}},common:{dismissNotice:function(e){return t("smush_dismiss_notice",{key:e})},hideModal:function(e){return t("hide_modal",{modal_id:e})},track:function(e,n){return t("smush_analytics_track_event",{event:e,properties:n})},request:function(e){return e.action&&t(e.action,e)}},scanMediaLibrary:{start:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t("wp_smush_start_background_scan",{optimize_on_scan_completed:e=e?1:0,_ajax_nonce:window.wp_smushit_data.media_library_scan.nonce})},cancel:function(){return t("wp_smush_cancel_background_scan",{_ajax_nonce:window.wp_smushit_data.media_library_scan.nonce})},getScanStatus:function(){return t("wp_smush_get_background_scan_status",{_ajax_nonce:window.wp_smushit_data.media_library_scan.nonce})}},webp:{switchMethod:function(e){return t("webp_switch_method",{method:e})}}};e()(this,n)},i=r;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function u(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}function s(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function l(t,e){return t.get(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(t,e))}var f=new WeakMap,d=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,f,new Set)},e=[{key:"track",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.allowToTrack()&&!this.inProgressEvent(t))return this.setInProgressEvent(t),i.common.track(t,n).then((function(n){return setTimeout((function(){e.restoreInProgressEvent(t)}),1e3),n}))}},{key:"inProgressEvent",value:function(t){return l(f,this).has(t)}},{key:"setInProgressEvent",value:function(t){l(f,this).add(t)}},{key:"restoreInProgressEvent",value:function(t){l(f,this).delete(t)}},{key:"allowToTrack",value:function(){var t;return!(null===(t=window.wp_smush_mixpanel)||void 0===t||!t.opt_in)}}],e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),v=new d;function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,y(o.key),o)}}function y(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}var m=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reason="not_set",this.requestedAssistance="na",this.modalAction="close",this.modalId="wp-smush-deactivation-survey-modal",this.modal=document.getElementById(this.modalId)},e=[{key:"init",value:function(){this.modal&&this.handleSurveyModal()}},{key:"handleSurveyModal",value:function(){var t=this;this.deactivatePluginLink=document.querySelector('a[id^="deactivate-smush"]')||document.querySelector('a[id^="deactivate-wp-smushit"]'),this.deactivatePluginLink&&this.deactivatePluginLink.addEventListener("click",(function(e){e.preventDefault(),t.showModal(),t.handleSurveyForm()}))}},{key:"handleSurveyForm",value:function(){this.registerRequestAssistanceLinkClickEvent(),this.handleRadioChange(),this.handleSkipDeactivation(),this.handleSubmitForm(),this.handleTrackDeactivate()}},{key:"registerRequestAssistanceLinkClickEvent",value:function(){var t=this,e=this.modal.querySelector("#smush-request-assistance-link");e&&(this.requestedAssistance="no",e.addEventListener("click",(function(){t.requestedAssistance="yes"})))}},{key:"handleRadioChange",value:function(){var t=this;this.userMessageField=document.getElementById("smush-deactivation-user-message-field"),this.userMessageField&&this.modal.querySelectorAll('input[type="radio"]').forEach((function(e){e.addEventListener("change",(function(){t.reason=this.value,t.toggleUserMessageField(this.parentElement)}))}))}},{key:"handleSkipDeactivation",value:function(){var t=this,e=this.modal.querySelector(".smush-skip-deactivate-button");e&&e.addEventListener("click",(function(e){e.target.classList.add("sui-button-onload"),t.modalAction="skip",t.closeModal(),v.allowToTrack()||t.redirectToDeactivateLink()}),{once:!0})}},{key:"handleSubmitForm",value:function(){var t=this,e=this.modal.querySelector(".smush-submit-deactivate-button");e&&e.addEventListener("click",(function(e){e.target.classList.add("sui-button-onload"),t.modalAction="submit",t.closeModal()}),{once:!0})}},{key:"toggleUserMessageField",value:function(t){var e;if(this.userMessageField){this.userMessageField.remove();var n=null===(e=t.dataset)||void 0===e?void 0:e.placeholder;if(n){var o=this.userMessageField.querySelector("textarea");o.placeholder=n,t.after(this.userMessageField),this.userMessageField.classList.remove("sui-hidden"),o.focus()}}}},{key:"getDeactivateLink",value:function(){return this.deactivatePluginLink.href}},{key:"showModal",value:function(){var t;null===(t=window.SUI)||void 0===t||t.openModal(this.modalId,"wpbody-content",void 0,!0,!1,!0)}},{key:"closeModal",value:function(){var t;null===(t=window.SUI)||void 0===t||t.closeModal(!0)}},{key:"handleTrackDeactivate",value:function(){var t=this;this.modal.addEventListener("afterClose",(function(){return t.trackDeactivate()}),{once:!0})}},{key:"trackDeactivate",value:function(){var t=this;if(this.shouldTrack()){var e=this.userMessageField.querySelector("textarea").value,n={Reason:this.reason,Message:e,"Modal Action":this.modalAction,"Requested Assistance":this.requestedAssistance,"Tracking Status":v.allowToTrack()?"opted_in":"opted_out"};i.common.request({action:"smush_track_deactivate",event:"Deactivation Survey",properties:n}).finally((function(){t.shouldDeactivatePlugin()&&t.redirectToDeactivateLink()}))}}},{key:"shouldTrack",value:function(){return v.allowToTrack()||this.isSubmitAction()}},{key:"isSubmitAction",value:function(){return"submit"===this.modalAction}},{key:"shouldDeactivatePlugin",value:function(){return"skip"===this.modalAction||this.isSubmitAction()}},{key:"redirectToDeactivateLink",value:function(){var t=this.getDeactivateLink();window.location.href=t}}],e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();document.addEventListener("DOMContentLoaded",(function(){function t(t){t.preventDefault();var n=t.target.closest(".smush-dismissible-notice");e(n.getAttribute("data-key"),n)}function e(t,e){var n=new XMLHttpRequest;n.open("POST",ajaxurl+"?action=smush_dismiss_notice&key="+t+"&_ajax_nonce="+smush_global.nonce,!0),n.onload=function(){e&&e.querySelector("button.notice-dismiss").dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))},n.send()}(new m).init(),document.querySelectorAll(".smush-dismissible-notice .smush-dismiss-notice-button").forEach((function(e){e.addEventListener("click",t)}));var n=document.querySelector("#wp-smush-cache-notice .smush-dismiss-notice-button");n&&n.addEventListener("click",(function(){var t=new XMLHttpRequest;t.open("POST",ajaxurl+"?action=smush_dismiss_cache_notice&_ajax_nonce="+smush_global.nonce,!0),t.onload=function(){window.SUI.closeNotice("wp-smush-cache-notice")},t.send()}));!function(){var t=document.querySelector(".wp-smush-dismissible-header-notice");if(t&&t.id){var n=t.dataset,o=n.dismissKey,r=n.message;if(r){t.onclick=function(n){var r=n.target.classList,i=r&&r.contains("smush-close-and-dismiss-notice");r&&(i||r.contains("sui-icon-check")||r.contains("sui-button-icon"))&&(o&&e(o),i&&window.SUI.closeNotice(t.id))};var i={type:"warning",icon:"info",dismiss:{show:!0,label:wp_smush_msgs.noticeDismiss,tooltip:wp_smush_msgs.noticeDismissTooltip}};window.SUI.openNotice(t.id,r,i)}}}();var o=document.querySelector('#toplevel_page_smush a[href*="utm_campaign=smush_submenu_upsell');o&&o.addEventListener("click",(function(){v.track("submenu_upsell")}))}))}()}();
//# sourceMappingURL=smush-global.min.js.map